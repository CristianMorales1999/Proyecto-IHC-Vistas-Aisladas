<!DOCTYPE html>
<html lang="es"><head>
    <meta charset="utf-8" />
    <link crossorigin href="https://fonts.gstatic.com/" rel="preconnect" />
    <link as="style"
      href="https://fonts.googleapis.com/css2?display=swap&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900&amp;family=Public+Sans%3Awght%40400%3B500%3B600%3B700%3B800%3B900"
      onload="this.rel='stylesheet'" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet" />
    <title>SaludIntegra - Reservar Cita - Seleccionar Fecha y Hora</title>
    <link href="data:image/x-icon;base64," rel="icon" type="image/x-icon" />
    <script
      src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <style type="text/tailwindcss">
    .material-icons {
      font-family: 'Material Icons';
      font-weight: normal;
      font-style: normal;
      font-size: 24px;
      display: inline-block;
      line-height: 1;
      text-transform: none;
      letter-spacing: normal;
      word-wrap: normal;
      white-space: nowrap;
      direction: ltr;
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
      -moz-osx-font-smoothing: grayscale;
      font-feature-settings: 'liga';
    }
    .calendar-day.available:hover {
      background-color: #e0e7ff;color: #3730a3;}
    .calendar-day.selected {
      background-color: #312e81;color: white;
    }
    .time-slot.selected {
        background-color: #312e81;color: white;
        border-color: #312e81;}
  </style>
  </head>
  <body class="bg-gray-50"
    style='font-family: "Public Sans", "Noto Sans", sans-serif;'>
    <div
      class="relative flex size-full min-h-screen flex-col group/design-root overflow-x-hidden">
      <div class="layout-container flex h-full grow flex-col">
        <header
          class="flex items-center justify-between whitespace-nowrap border-b border-solid border-gray-200 px-4 sm:px-6 lg:px-10 py-3 bg-white shadow-sm">
          <div class="flex items-center gap-4">
            <button
              class="lg:hidden p-2 rounded-md text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-[#1e40af]">
              <span class="material-icons">menu</span>
            </button>
            <div class="flex items-center gap-2 text-blue-700">
              <span class="material-icons text-3xl">health_and_safety</span>
              <h2 class="text-xl font-bold tracking-tight">SaludIntegra</h2>
            </div>
            <div
              class="hidden lg:block ml-4 text-lg font-semibold text-gray-600">Reservar
              Cita - Paso 3</div>
          </div>
          <div class="flex items-center gap-3 sm:gap-4">
            <button
              class="relative flex items-center justify-center rounded-full h-10 w-10 text-gray-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#1e40af]">
              <span class="material-icons">notifications</span>
              <span
                class="absolute top-1 right-1 h-2.5 w-2.5 rounded-full bg-red-500 border-2 border-white"></span>
            </button>
            <div class="relative">
              <button
                class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10 border-2 border-transparent hover:border-[#1e40af] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#1e40af]"
                style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuCoNZzc9gci_9cjdDg4rVbZ6Wf20TEJod9P3dhIFjFnL5AvxKo96FtYgsr7_NusV-ETfzYj9mYMWz-B6A8yMpsQWcLb8E0-RUvmTTVEbsI2lI2xASsYPL0wF0OQ1kDNJa1di6HFayGMRYO7eLxBRwYsp_mf22gcvXX2Lzw7n2hyuvEHFOXV5BkC9Q1u5xnN_Iz__RTKEehjuBPkcAsWi7FeA7gcaHfnm8Yn8Y7oaSWFYt0CvYCoG7KgffKNafzvnALl5Ent-uxRbHUu");'></button>
            </div>
          </div>
        </header>
        <div class="flex flex-1">
          <aside
            class="hidden lg:flex flex-col w-64 bg-white border-r border-gray-200 p-4 shadow-sm">
            <nav class="flex flex-col gap-2 mt-4">
              <a
                class="flex items-center gap-3 px-3 py-2.5 text-gray-700 hover:bg-gray-100 hover:text-blue-600 rounded-lg transition-colors duration-150"
                href="1.dashboard-paciente.html">
                <span class="material-icons">dashboard</span>
                <span class="text-sm font-medium">Panel</span>
              </a>
              <a
                class="flex items-center gap-3 px-3 py-2.5 text-blue-700 bg-blue-50 border border-blue-200 rounded-lg font-semibold shadow-sm transition-colors duration-150"
                href="2.recervar-cita-paso-1-especialidad.html">
                <span class="material-icons">add_circle</span>
                <span class="text-sm">Reservar Cita</span>
              </a>
              <a
                class="flex items-center gap-3 px-3 py-2.5 text-gray-700 hover:bg-gray-100 hover:text-blue-600 rounded-lg transition-colors duration-150"
                href="#">
                <span class="material-icons">chat</span>
                <span class="text-sm font-medium">Mensajes</span>
              </a>
              <a
                class="flex items-center gap-3 px-3 py-2.5 text-gray-700 hover:bg-gray-100 hover:text-blue-600 rounded-lg transition-colors duration-150"
                href="#">
                <span class="material-icons">folder</span>
                <span class="text-sm font-medium">Documentos</span>
              </a>
              <a
                class="flex items-center gap-3 px-3 py-2.5 text-gray-700 hover:bg-gray-100 hover:text-blue-600 rounded-lg transition-colors duration-150"
                href="1.2.dashboard-paciente-mi-perfil.html">
                <span class="material-icons">person</span>
                <span class="text-sm font-medium">Perfil</span>
              </a>
            </nav>
            <div class="mt-auto">
              <a
                class="flex items-center gap-3 px-3 py-2.5 text-gray-700 hover:bg-gray-100 hover:text-red-600 rounded-lg transition-colors duration-150"
                href="../1.login.html">
                <span class="material-icons">logout</span>
                <span class="text-sm font-medium">Cerrar Sesión</span>
              </a>
            </div>
          </aside>
          <main class="flex-1 p-4 sm:p-6 lg:p-8 bg-gray-50">

            <div class="max-w-4xl mx-auto">
              <h1
                class="text-2xl sm:text-3xl font-bold text-gray-800 mb-2">Reservar
                Cita Médica</h1>
              <h2
                class="text-lg sm:text-xl font-semibold text-blue-600 mb-6">Paso
                3 de 4: Seleccione Fecha y Hora para su cita con <span
                  class="text-blue-700">Dr. Carlos Ramirez</span></h2>
              <div class="mb-8">
                <div class="overflow-hidden rounded-full bg-gray-200">
                  <div class="h-2 rounded-full bg-blue-600"
                    style="width: 75%"></div>
                </div>
                <div class="mt-2 flex justify-between text-xs text-gray-500">
                  <span>Especialidad</span>
                  <span>Médico</span>
                  <span class="font-semibold text-blue-600">Fecha y Hora</span>
                  <span>Confirmar</span>
                </div>
              </div>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-8">

                <div class="bg-white p-6 rounded-xl shadow-lg">

                  <div class="flex items-center justify-between mb-4">
                    <button
                      class="p-2 rounded-full hover:bg-gray-100 text-gray-600"
                      id="prevMonth">
                      <span class="material-icons">chevron_left</span>
                    </button>
                    <h3 class="text-lg font-semibold text-gray-700"
                      id="currentMonthYear">Mayo 2024</h3>
                    <button
                      class="p-2 rounded-full hover:bg-gray-100 text-gray-600"
                      id="nextMonth">
                      <span class="material-icons">chevron_right</span>
                    </button>
                  </div>

                  <div
                    class="grid grid-cols-7 gap-1 text-center text-sm text-gray-500 mb-2">
                    <span>Lu</span><span>Ma</span><span>Mi</span><span>Ju</span><span>Vi</span><span>Sá</span><span>Do</span>
                  </div>

                  <div class="grid grid-cols-7 gap-1" id="calendarGrid">
                  </div>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-lg">
                  <h3 class="text-lg font-semibold text-gray-700 mb-1">Horarios
                    Disponibles</h3>
                  <p class="text-sm text-blue-600 mb-4"
                    id="selectedDateText">Seleccione una fecha para ver los
                    horarios.</p>
                  <div class="grid grid-cols-2 sm:grid-cols-3 gap-3"
                    id="timeSlotsContainer">
                  </div>
                </div>

              </div>

              <div
                class="mt-8 flex flex-col sm:flex-row justify-between items-center gap-3">
                <button
                  class="w-full sm:w-auto px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-150"
                  type="button">
                  Anterior
                </button>
                <div class="flex flex-col sm:flex-row gap-3 w-full sm:w-auto">
                  <button
                    class="w-full sm:w-auto px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-150"
                    type="button">
                    Cancelar
                  </button>
                  <button
                    class="w-full sm:w-auto px-6 py-3 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors duration-150"
                    disabled id="nextButton" type="button">
                    Siguiente
                  </button>
                </div>
              </div>

            </div>
          </main>
        </div>
      </div>
    </div>
    <script>
    const calendarGrid = document.getElementById('calendarGrid');
    const currentMonthYear = document.getElementById('currentMonthYear');
    const prevMonthButton = document.getElementById('prevMonth');
    const nextMonthButton = document.getElementById('nextMonth');
    const timeSlotsContainer = document.getElementById('timeSlotsContainer');
    const selectedDateText = document.getElementById('selectedDateText');
    const nextButton = document.getElementById('nextButton');
    let currentDate = new Date();
    let selectedDate = null;
    let selectedTime = null;
    // Mock available dates and times for Dr. Carlos Ramirez
    const availableSlots = {
      "2025-06-15": ["09:00", "09:30", "11:00", "14:30", "15:00"],
      "2025-06-16": ["10:00", "10:30", "12:00", "16:00"],
      "2025-06-20": ["09:30", "11:30", "14:00"],
      "2025-06-22": ["09:00", "10:00", "11:00", "14:00", "15:30", "16:00"],
      "2025-06-23": ["09:00", "11:00", "14:30"],
      "2025-06-03": ["10:00", "11:30", "15:00", "15:30"],
      "2025-06-05": ["09:00", "09:30", "14:00"],
    };
    function renderCalendar() {
      calendarGrid.innerHTML = '';
      const year = currentDate.getFullYear();
      const month = currentDate.getMonth();
      const monthName = currentDate.toLocaleDateString('es-ES', { month: 'long' });
      currentMonthYear.textContent = `${monthName.charAt(0).toUpperCase() + monthName.slice(1)} ${year}`;
      const firstDayOfMonth = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month + 1, 0).getDate();
      // Adjust for Monday start (0 = Sunday, 1 = Monday, etc.)
      const adjustedFirstDay = (firstDayOfMonth === 0) ? 6 : firstDayOfMonth -1;
      for (let i = 0; i < adjustedFirstDay; i++) {
        const emptyCell = document.createElement('div');
        calendarGrid.appendChild(emptyCell);
      }
      for (let day = 1; day <= daysInMonth; day++) {
        const dayCell = document.createElement('button');
        dayCell.textContent = day;
        dayCell.classList.add('calendar-day', 'p-2', 'rounded-full', 'text-sm', 'transition-colors', 'duration-150', 'focus:outline-none', 'focus:ring-2', 'focus:ring-blue-500', 'focus:ring-offset-1');
        const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
        const today = new Date();
        today.setHours(0,0,0,0);
        const cellDate = new Date(year, month, day);

        if ((availableSlots[dateStr] && cellDate >= today)) {
          dayCell.classList.add('available', 'cursor-pointer', 'text-gray-700');
          dayCell.onclick = () => selectDate(day, dateStr);
        } else {
          dayCell.classList.add('text-gray-400', 'cursor-not-allowed');
          dayCell.disabled = true;
        }
        if (selectedDate === dateStr) {
          dayCell.classList.add('selected');
        }
        calendarGrid.appendChild(dayCell);
      }
    }
    function selectDate(day, dateStr) {
      selectedDate = dateStr;
      selectedTime = null; // Reset time when new date is selected
      renderCalendar(); // Re-render to highlight selected date
      renderTimeSlots(dateStr);
      selectedDateText.textContent = `Horarios para el ${new Date(dateStr + 'T00:00:00').toLocaleDateString('es-ES', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}`;
      updateNextButtonState();
    }
    function renderTimeSlots(dateStr) {
      timeSlotsContainer.innerHTML = '';
      const times = availableSlots[dateStr] || [];
      if (times.length === 0) {
        timeSlotsContainer.innerHTML = '<p class="text-sm text-gray-500 col-span-full">No hay horarios disponibles para esta fecha.</p>';
        return;
      }
      times.forEach(time => {
        const timeSlotButton = document.createElement('button');
        timeSlotButton.textContent = time;
        timeSlotButton.classList.add('time-slot', 'px-3', 'py-2', 'border', 'border-gray-300', 'rounded-lg', 'text-sm', 'text-gray-700', 'hover:bg-blue-50', 'hover:border-blue-500', 'focus:outline-none', 'focus:ring-2', 'focus:ring-blue-500', 'transition-colors', 'duration-150');
        timeSlotButton.onclick = () => selectTime(time);
        if (selectedTime === time) {
            timeSlotButton.classList.add('selected');
        }
        timeSlotsContainer.appendChild(timeSlotButton);
      });
    }
    function selectTime(time) {
        selectedTime = time;
        // Re-render time slots to update selection
        const currentSelectedDateSlots = document.querySelectorAll('#timeSlotsContainer .time-slot');
        currentSelectedDateSlots.forEach(btn => {
            if (btn.textContent === time) {
                btn.classList.add('selected');
            } else {
                btn.classList.remove('selected');
            }
        });
        updateNextButtonState();
    }
    function updateNextButtonState() {
      nextButton.disabled = !(selectedDate && selectedTime);
    }
    prevMonthButton.onclick = () => {
      currentDate.setMonth(currentDate.getMonth() - 1);
      selectedDate = null;
      selectedTime = null;
      timeSlotsContainer.innerHTML = '';
      selectedDateText.textContent = 'Seleccione una fecha para ver los horarios.';
      renderCalendar();
      updateNextButtonState();
    };
    nextMonthButton.onclick = () => {
      currentDate.setMonth(currentDate.getMonth() + 1);
      selectedDate = null;
      selectedTime = null;
      timeSlotsContainer.innerHTML = '';
      selectedDateText.textContent = 'Seleccione una fecha para ver los horarios.';
      renderCalendar();
      updateNextButtonState();
    };
    // Initial render
    renderCalendar();
    updateNextButtonState();
  </script>

  </body></html>